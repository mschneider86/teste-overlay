<!-- Overlay Normal (não minimizado) -->
<div class="overlay-backdrop" 
     *ngIf="!isMinimized"
     [@overlayAnimation] 
     (click)="onBackdropClick($event)"
     (keypress)="onKeyPress($event)"
     (keydown)="onKeyDown($event)"
     (keyup)="onKeyUp($event)">
  
  <div class="overlay-content" 
       #overlayContent
       [@contentAnimation]="isMinimized ? 'minimized' : 'normal'"
       (click)="onContentClick($event)"
       (keypress)="onKeyPress($event)"
       (keydown)="onKeyDown($event)"
       (keyup)="onKeyUp($event)"
       [style.max-width]="maxWidth"
       [style.max-height]="maxHeight"
       [class.draggable]="draggable">
    
    <!-- Header do Overlay -->
    <div class="overlay-header" 
         *ngIf="title || showCloseButton"
         [class.drag-handle]="draggable"
         (mousedown)="onHeaderMouseDown($event)">
      <h2 class="overlay-title" *ngIf="title">{{ title }}</h2>
      <div class="header-actions">
        <mat-icon class="drag-icon" *ngIf="draggable">drag_indicator</mat-icon>
        <button mat-icon-button 
                class="minimize-button" 
                (click)="toggleMinimize()"
                *ngIf="showMinimizeButton"
                aria-label="Minimizar">
          <mat-icon>remove</mat-icon>
        </button>
        <button mat-icon-button 
                class="close-button" 
                (click)="close()"
                *ngIf="showCloseButton"
                aria-label="Fechar">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
    
    <!-- Conteúdo do Overlay -->
    <div class="overlay-body">
      <ng-content></ng-content>
    </div>
    
  </div>
</div>

<!-- Botão Flutuante (minimizado) -->
<div class="floating-button" 
     *ngIf="isMinimized"
     [@floatingAnimation]
     (click)="toggleMinimize()"
     [attr.aria-label]="'Reabrir ' + title">
  <mat-icon>{{ title ? 'description' : 'open_in_new' }}</mat-icon>
  <span class="floating-title" *ngIf="title">{{ title }}</span>
</div>